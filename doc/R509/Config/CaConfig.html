<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=en_us" />
<title>Class: R509::Config::CaConfig</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (C)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../R509.html" title="R509 (module)">R509</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Config.html" title="R509::Config (module)">Config</a></span></span>
     &raquo; 
    <span class="title">CaConfig</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: R509::Config::CaConfig
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">R509::Config::CaConfig</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
      <dt class="r2">Extended by:</dt>
      <dd class="r2"><span class='object_link'><a href="../IOHelpers.html" title="R509::IOHelpers (module)">IOHelpers</a></span></dd>
      
    
  
    
      <dt class="r1">Includes:</dt>
      <dd class="r1"><span class='object_link'><a href="../IOHelpers.html" title="R509::IOHelpers (module)">IOHelpers</a></span></dd>
      
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/r509/Config.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Stores a configuration for our CA.</p>


  </div>
</div>
<div class="tags">
  
</div>

  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ca_cert-instance_method" title="#ca_cert (instance method)">- (Object) <strong>ca_cert</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute ca_cert.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#cdp_location-instance_method" title="#cdp_location (instance method)">- (Object) <strong>cdp_location</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute cdp_location.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#crl_list_file-instance_method" title="#crl_list_file (instance method)">- (Object) <strong>crl_list_file</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute crl_list_file.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#crl_number_file-instance_method" title="#crl_number_file (instance method)">- (Object) <strong>crl_number_file</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute crl_number_file.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#crl_start_skew_seconds-instance_method" title="#crl_start_skew_seconds (instance method)">- (Object) <strong>crl_start_skew_seconds</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute crl_start_skew_seconds.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#crl_validity_hours-instance_method" title="#crl_validity_hours (instance method)">- (Object) <strong>crl_validity_hours</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute crl_validity_hours.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#message_digest-instance_method" title="#message_digest (instance method)">- (Object) <strong>message_digest</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute message_digest.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ocsp_chain-instance_method" title="#ocsp_chain (instance method)">- (Object) <strong>ocsp_chain</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute ocsp_chain.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ocsp_location-instance_method" title="#ocsp_location (instance method)">- (Object) <strong>ocsp_location</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute ocsp_location.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ocsp_start_skew_seconds-instance_method" title="#ocsp_start_skew_seconds (instance method)">- (Object) <strong>ocsp_start_skew_seconds</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute ocsp_start_skew_seconds.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ocsp_validity_hours-instance_method" title="#ocsp_validity_hours (instance method)">- (Object) <strong>ocsp_validity_hours</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute ocsp_validity_hours.</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_yaml-class_method" title="from_yaml (class method)">+ (Object) <strong>from_yaml</strong>(conf_name, yaml_data, opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Loads the named configuration config from a yaml string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_from_hash-class_method" title="load_from_hash (class method)">+ (Object) <strong>load_from_hash</strong>(conf, opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Load the configuration from a data hash.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_yaml-class_method" title="load_yaml (class method)">+ (Object) <strong>load_yaml</strong>(conf_name, yaml_file, opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Loads the named configuration config from a yaml file.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (CaConfig) <strong>initialize</strong>(opts = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>OCSP signing delegate that constitutes the chain to attach to an OCSP
response.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#num_profiles-instance_method" title="#num_profiles (instance method)">- (Integer) <strong>num_profiles</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The number of profiles.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ocsp_cert-instance_method" title="#ocsp_cert (instance method)">- (R509::Cert) <strong>ocsp_cert</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Either a custom OCSP cert or the ca_cert.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#profile-instance_method" title="#profile (instance method)">- (R509::Config::CaProfile) <strong>profile</strong>(prof) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The config profile.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_profile-instance_method" title="#set_profile (instance method)">- (Object) <strong>set_profile</strong>(name, prof) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../IOHelpers.html" title="R509::IOHelpers (module)">IOHelpers</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../IOHelpers.html#read_data-instance_method" title="R509::IOHelpers#read_data (method)">read_data</a></span>, <span class='object_link'><a href="../IOHelpers.html#write_data-instance_method" title="R509::IOHelpers#write_data (method)">write_data</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="R509::Config::CaConfig (class)">CaConfig</a></span></tt>) <strong>initialize</strong>(opts = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>OCSP signing delegate that constitutes the chain to attach to an OCSP
response</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>opts</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>opts</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../Cert.html" title="R509::Cert (class)">R509::Cert</a></span></tt>)</span>
          <span class="name">:ca_cert</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'>
<p>Cert+Key pair</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="name">:crl_validity_hours</span>
          <span class="default">
            
              &mdash; default:
              <tt>168</tt>
            
          </span>
          &mdash; <div class='inline'>
<p>The number of hours that a CRL will be valid. Defaults to 7 days.</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>Hash&lt;String, <span class='object_link'><a href="CaProfile.html" title="R509::Config::CaProfile (class)">R509::Config::CaProfile</a></span>&gt;</tt>)</span>
          <span class="name">:profiles</span>
          <span class="default">
            
          </span>
          
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:message_digest</span>
          <span class="default">
            
              &mdash; default:
              <tt>SHA1</tt>
            
          </span>
          &mdash; <div class='inline'>
<p>The hashing algorithm to use.</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:cdp_location</span>
          <span class="default">
            
          </span>
          
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:ocsp_location</span>
          <span class="default">
            
          </span>
          
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:crl_number_file</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'>
<p>The file that we will save the CRL numbers to. defaults to a StringIO
object if not provided</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:crl_list_file</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'>
<p>The file that we will save the CRL list data to. defaults to a StringIO
object if not provided</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../Cert.html" title="R509::Cert (class)">R509::Cert</a></span></tt>)</span>
          <span class="name">:ocsp_cert</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'>
<p>An optional cert+key pair</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>Array&lt;OpenSSL::X509::Certificate&gt;</tt>)</span>
          <span class="name">:ocsp_chain</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'>
<p>An optional array</p>
</div>
        </tr>
      
    </ul>
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 149</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='not not kw'>not</span> <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:ca_cert</span><span class='rparen token'>)</span> <span class='then then kw'>then</span>
        <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>'Config object requires that you pass :ca_cert'</span>
    <span class='end end kw'>end</span>

    <span class='@ca_cert ivar id'>@ca_cert</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:ca_cert</span><span class='rbrack token'>]</span>

    <span class='if if kw'>if</span> <span class='not not kw'>not</span> <span class='@ca_cert ivar id'>@ca_cert</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='R509 constant id'>R509</span><span class='colon2 op'>::</span><span class='Cert constant id'>Cert</span><span class='rparen token'>)</span> <span class='then then kw'>then</span>
        <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>':ca_cert must be of type R509::Cert'</span>
    <span class='end end kw'>end</span>
    <span class='if if kw'>if</span> <span class='not not kw'>not</span> <span class='@ca_cert ivar id'>@ca_cert</span><span class='dot token'>.</span><span class='has_private_key? fid id'>has_private_key?</span>
        <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>':ca_cert object must contain a private key, not just a certificate'</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#ocsp data</span>
    <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:ocsp_cert</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='not not kw'>not</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:ocsp_cert</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='R509 constant id'>R509</span><span class='colon2 op'>::</span><span class='Cert constant id'>Cert</span><span class='rparen token'>)</span> <span class='then then kw'>then</span>
        <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>':ocsp_cert, if provided, must be of type R509::Cert'</span>
    <span class='end end kw'>end</span>
    <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:ocsp_cert</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='not not kw'>not</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:ocsp_cert</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='has_private_key? fid id'>has_private_key?</span>
        <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>':ocsp_cert must contain a private key, not just a certificate'</span>
    <span class='end end kw'>end</span>
    <span class='@ocsp_cert ivar id'>@ocsp_cert</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:ocsp_cert</span><span class='rbrack token'>]</span>
    <span class='@ocsp_location ivar id'>@ocsp_location</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:ocsp_location</span><span class='rbrack token'>]</span>
    <span class='@ocsp_chain ivar id'>@ocsp_chain</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:ocsp_chain</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:ocsp_chain</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span>
    <span class='@ocsp_validity_hours ivar id'>@ocsp_validity_hours</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:ocsp_validity_hours</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='integer val'>168</span>
    <span class='@ocsp_start_skew_seconds ivar id'>@ocsp_start_skew_seconds</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:ocsp_start_skew_seconds</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='integer val'>3600</span>

    <span class='@crl_validity_hours ivar id'>@crl_validity_hours</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:crl_validity_hours</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='integer val'>168</span>
    <span class='@crl_start_skew_seconds ivar id'>@crl_start_skew_seconds</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:crl_start_skew_seconds</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='integer val'>3600</span>
    <span class='@crl_number_file ivar id'>@crl_number_file</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:crl_number_file</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='nil nil kw'>nil</span>
    <span class='@crl_list_file ivar id'>@crl_list_file</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:crl_list_file</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='nil nil kw'>nil</span>
    <span class='@cdp_location ivar id'>@cdp_location</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:cdp_location</span><span class='rbrack token'>]</span>
    <span class='@message_digest ivar id'>@message_digest</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:message_digest</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='string val'>&quot;SHA1&quot;</span>



    <span class='@profiles ivar id'>@profiles</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
        <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:profiles</span><span class='rbrack token'>]</span>
        <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:profiles</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each_pair identifier id'>each_pair</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='prof identifier id'>prof</span><span class='bitor op'>|</span>
          <span class='set_profile identifier id'>set_profile</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='prof identifier id'>prof</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="ca_cert=-instance_method"></span>
      <span id="ca_cert-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="ca_cert-instance_method">
  
    - (<tt>Object</tt>) <strong>ca_cert</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute ca_cert</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 129</span>

<span class='def def kw'>def</span> <span class='ca_cert identifier id'>ca_cert</span>
  <span class='@ca_cert ivar id'>@ca_cert</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="cdp_location=-instance_method"></span>
      <span id="cdp_location-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="cdp_location-instance_method">
  
    - (<tt>Object</tt>) <strong>cdp_location</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute cdp_location</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 129</span>

<span class='def def kw'>def</span> <span class='cdp_location identifier id'>cdp_location</span>
  <span class='@cdp_location ivar id'>@cdp_location</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="crl_list_file=-instance_method"></span>
      <span id="crl_list_file-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="crl_list_file-instance_method">
  
    - (<tt>Object</tt>) <strong>crl_list_file</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute crl_list_file</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 129</span>

<span class='def def kw'>def</span> <span class='crl_list_file identifier id'>crl_list_file</span>
  <span class='@crl_list_file ivar id'>@crl_list_file</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="crl_number_file=-instance_method"></span>
      <span id="crl_number_file-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="crl_number_file-instance_method">
  
    - (<tt>Object</tt>) <strong>crl_number_file</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute crl_number_file</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 129</span>

<span class='def def kw'>def</span> <span class='crl_number_file identifier id'>crl_number_file</span>
  <span class='@crl_number_file ivar id'>@crl_number_file</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="crl_start_skew_seconds=-instance_method"></span>
      <span id="crl_start_skew_seconds-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="crl_start_skew_seconds-instance_method">
  
    - (<tt>Object</tt>) <strong>crl_start_skew_seconds</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute crl_start_skew_seconds</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 129</span>

<span class='def def kw'>def</span> <span class='crl_start_skew_seconds identifier id'>crl_start_skew_seconds</span>
  <span class='@crl_start_skew_seconds ivar id'>@crl_start_skew_seconds</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="crl_validity_hours=-instance_method"></span>
      <span id="crl_validity_hours-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="crl_validity_hours-instance_method">
  
    - (<tt>Object</tt>) <strong>crl_validity_hours</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute crl_validity_hours</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 129</span>

<span class='def def kw'>def</span> <span class='crl_validity_hours identifier id'>crl_validity_hours</span>
  <span class='@crl_validity_hours ivar id'>@crl_validity_hours</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="message_digest=-instance_method"></span>
      <span id="message_digest-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="message_digest-instance_method">
  
    - (<tt>Object</tt>) <strong>message_digest</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute message_digest</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 129</span>

<span class='def def kw'>def</span> <span class='message_digest identifier id'>message_digest</span>
  <span class='@message_digest ivar id'>@message_digest</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="ocsp_chain=-instance_method"></span>
      <span id="ocsp_chain-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="ocsp_chain-instance_method">
  
    - (<tt>Object</tt>) <strong>ocsp_chain</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute ocsp_chain</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 129</span>

<span class='def def kw'>def</span> <span class='ocsp_chain identifier id'>ocsp_chain</span>
  <span class='@ocsp_chain ivar id'>@ocsp_chain</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="ocsp_location=-instance_method"></span>
      <span id="ocsp_location-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="ocsp_location-instance_method">
  
    - (<tt>Object</tt>) <strong>ocsp_location</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute ocsp_location</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 129</span>

<span class='def def kw'>def</span> <span class='ocsp_location identifier id'>ocsp_location</span>
  <span class='@ocsp_location ivar id'>@ocsp_location</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="ocsp_start_skew_seconds=-instance_method"></span>
      <span id="ocsp_start_skew_seconds-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="ocsp_start_skew_seconds-instance_method">
  
    - (<tt>Object</tt>) <strong>ocsp_start_skew_seconds</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute ocsp_start_skew_seconds</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 129</span>

<span class='def def kw'>def</span> <span class='ocsp_start_skew_seconds identifier id'>ocsp_start_skew_seconds</span>
  <span class='@ocsp_start_skew_seconds ivar id'>@ocsp_start_skew_seconds</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="ocsp_validity_hours=-instance_method"></span>
      <span id="ocsp_validity_hours-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="ocsp_validity_hours-instance_method">
  
    - (<tt>Object</tt>) <strong>ocsp_validity_hours</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute ocsp_validity_hours</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 129</span>

<span class='def def kw'>def</span> <span class='ocsp_validity_hours identifier id'>ocsp_validity_hours</span>
  <span class='@ocsp_validity_hours ivar id'>@ocsp_validity_hours</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="from_yaml-class_method">
  
    + (<tt>Object</tt>) <strong>from_yaml</strong>(conf_name, yaml_data, opts = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Loads the named configuration config from a yaml string.</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>conf_name</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the config within the file. Note that a single yaml file can
contain more than one configuration.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>yaml_file</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The filename to load yaml config data from.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


306
307
308
309
310
311
312
313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 306</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='from_yaml identifier id'>from_yaml</span><span class='lparen token'>(</span><span class='conf_name identifier id'>conf_name</span><span class='comma token'>,</span> <span class='yaml_data identifier id'>yaml_data</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='not not kw'>not</span> <span class='yaml_data identifier id'>yaml_data</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
        <span class='conf identifier id'>conf</span> <span class='assign token'>=</span> <span class='YAML constant id'>YAML</span><span class='dot token'>.</span><span class='load identifier id'>load</span><span class='lparen token'>(</span><span class='yaml_data identifier id'>yaml_data</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
        <span class='conf identifier id'>conf</span> <span class='assign token'>=</span> <span class='yaml_data identifier id'>yaml_data</span>
    <span class='end end kw'>end</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_from_hash identifier id'>load_from_hash</span><span class='lparen token'>(</span><span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='conf_name identifier id'>conf_name</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="load_from_hash-class_method">
  
    + (<tt>Object</tt>) <strong>load_from_hash</strong>(conf, opts = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Load the configuration from a data hash. The same type that might be used
when loading from a YAML file.</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>conf</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A hash containing all the configuration options</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>opts</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>opts</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:ca_root_path</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'>
<p>The root path for the CA. Defaults to the current working directory.</p>
</div>
        </tr>
      
    </ul>
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 230</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_from_hash identifier id'>load_from_hash</span><span class='lparen token'>(</span><span class='conf identifier id'>conf</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='conf identifier id'>conf</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
        <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;conf not found&quot;</span>
    <span class='end end kw'>end</span>
    <span class='unless unless kw'>unless</span> <span class='conf identifier id'>conf</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
        <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;conf must be a Hash&quot;</span>
    <span class='end end kw'>end</span>

    <span class='ca_root_path identifier id'>ca_root_path</span> <span class='assign token'>=</span> <span class='Pathname constant id'>Pathname</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:ca_root_path</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='getwd identifier id'>getwd</span><span class='rparen token'>)</span>

    <span class='unless unless kw'>unless</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span><span class='lparen token'>(</span><span class='ca_root_path identifier id'>ca_root_path</span><span class='rparen token'>)</span>
        <span class='raise identifier id'>raise</span> <span class='R509Error constant id'>R509Error</span><span class='comma token'>,</span> <span class='dstring node'>&quot;ca_root_path is not a directory: #{ca_root_path}&quot;</span>
    <span class='end end kw'>end</span>

    <span class='ca_cert_hash identifier id'>ca_cert_hash</span> <span class='assign token'>=</span> <span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='string val'>'ca_cert'</span><span class='rbrack token'>]</span>

    <span class='if if kw'>if</span> <span class='ca_cert_hash identifier id'>ca_cert_hash</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>'engine'</span><span class='rparen token'>)</span>
        <span class='ca_cert identifier id'>ca_cert</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_with_engine identifier id'>load_with_engine</span><span class='lparen token'>(</span><span class='ca_cert_hash identifier id'>ca_cert_hash</span><span class='comma token'>,</span><span class='ca_root_path identifier id'>ca_root_path</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='if if kw'>if</span> <span class='ca_cert identifier id'>ca_cert</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='and and kw'>and</span> <span class='ca_cert_hash identifier id'>ca_cert_hash</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>'pkcs12'</span><span class='rparen token'>)</span>
        <span class='ca_cert identifier id'>ca_cert</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_with_pkcs12 identifier id'>load_with_pkcs12</span><span class='lparen token'>(</span><span class='ca_cert_hash identifier id'>ca_cert_hash</span><span class='comma token'>,</span><span class='ca_root_path identifier id'>ca_root_path</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='if if kw'>if</span> <span class='ca_cert identifier id'>ca_cert</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='and and kw'>and</span> <span class='ca_cert_hash identifier id'>ca_cert_hash</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>'cert'</span><span class='rparen token'>)</span>
        <span class='ca_cert identifier id'>ca_cert</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_with_key identifier id'>load_with_key</span><span class='lparen token'>(</span><span class='ca_cert_hash identifier id'>ca_cert_hash</span><span class='comma token'>,</span><span class='ca_root_path identifier id'>ca_root_path</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
        <span class='symbol val'>:ca_cert</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ca_cert identifier id'>ca_cert</span><span class='comma token'>,</span>
        <span class='symbol val'>:crl_validity_hours</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='string val'>'crl_validity_hours'</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
        <span class='symbol val'>:ocsp_location</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='string val'>'ocsp_location'</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
        <span class='symbol val'>:cdp_location</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='string val'>'cdp_location'</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
        <span class='symbol val'>:message_digest</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='string val'>'message_digest'</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='rbrace token'>}</span>

    <span class='if if kw'>if</span> <span class='conf identifier id'>conf</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;crl_list&quot;</span><span class='rparen token'>)</span>
        <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:crl_list_file</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='ca_root_path identifier id'>ca_root_path</span> <span class='plus op'>+</span> <span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='string val'>'crl_list'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='end end kw'>end</span>

    <span class='if if kw'>if</span> <span class='conf identifier id'>conf</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;crl_number&quot;</span><span class='rparen token'>)</span>
        <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:crl_number_file</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='ca_root_path identifier id'>ca_root_path</span> <span class='plus op'>+</span> <span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='string val'>'crl_number'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='end end kw'>end</span>


    <span class='profs identifier id'>profs</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='string val'>'profiles'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='profile identifier id'>profile</span><span class='bitor op'>|</span>
        <span class='data identifier id'>data</span> <span class='assign token'>=</span> <span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='string val'>'profiles'</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='profile identifier id'>profile</span><span class='rbrack token'>]</span>
        <span class='if if kw'>if</span> <span class='not not kw'>not</span> <span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;subject_item_policy&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
            <span class='subject_item_policy identifier id'>subject_item_policy</span> <span class='assign token'>=</span> <span class='R509 constant id'>R509</span><span class='colon2 op'>::</span><span class='Config constant id'>Config</span><span class='colon2 op'>::</span><span class='SubjectItemPolicy constant id'>SubjectItemPolicy</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;subject_item_policy&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
        <span class='profs identifier id'>profs</span><span class='lbrack token'>[</span><span class='profile identifier id'>profile</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='R509 constant id'>R509</span><span class='colon2 op'>::</span><span class='Config constant id'>Config</span><span class='colon2 op'>::</span><span class='CaProfile constant id'>CaProfile</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:key_usage</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;key_usage&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                           <span class='symbol val'>:extended_key_usage</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;extended_key_usage&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                           <span class='symbol val'>:basic_constraints</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;basic_constraints&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                           <span class='symbol val'>:certificate_policies</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;certificate_policies&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                           <span class='symbol val'>:subject_item_policy</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='subject_item_policy identifier id'>subject_item_policy</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span> <span class='unless unless_mod kw'>unless</span> <span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='string val'>'profiles'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:profiles</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='profs identifier id'>profs</span>

    <span class='comment val'># Create the instance.</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="load_yaml-class_method">
  
    + (<tt>Object</tt>) <strong>load_yaml</strong>(conf_name, yaml_file, opts = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Loads the named configuration config from a yaml file.</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>conf_name</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the config within the file. Note that a single yaml file can
contain more than one configuration.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>yaml_file</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The filename to load yaml config data from.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


297
298
299
300</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 297</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_yaml identifier id'>load_yaml</span><span class='lparen token'>(</span><span class='conf_name identifier id'>conf_name</span><span class='comma token'>,</span> <span class='yaml_file identifier id'>yaml_file</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='conf identifier id'>conf</span> <span class='assign token'>=</span> <span class='YAML constant id'>YAML</span><span class='dot token'>.</span><span class='load_file identifier id'>load_file</span><span class='lparen token'>(</span><span class='yaml_file identifier id'>yaml_file</span><span class='rparen token'>)</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_from_hash identifier id'>load_from_hash</span><span class='lparen token'>(</span><span class='conf identifier id'>conf</span><span class='lbrack token'>[</span><span class='conf_name identifier id'>conf_name</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="num_profiles-instance_method">
  
    - (<tt>Integer</tt>) <strong>num_profiles</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The number of profiles</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'>
<p>The number of profiles</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 218</span>

<span class='def def kw'>def</span> <span class='num_profiles identifier id'>num_profiles</span>
  <span class='@profiles ivar id'>@profiles</span><span class='dot token'>.</span><span class='count identifier id'>count</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ocsp_cert-instance_method">
  
    - (<tt><span class='object_link'><a href="../Cert.html" title="R509::Cert (class)">R509::Cert</a></span></tt>) <strong>ocsp_cert</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Either a custom OCSP cert or the ca_cert</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Cert.html" title="R509::Cert (class)">R509::Cert</a></span></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'>
<p>either a custom OCSP cert or the ca_cert</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 195</span>

<span class='def def kw'>def</span> <span class='ocsp_cert identifier id'>ocsp_cert</span>
    <span class='if if kw'>if</span> <span class='@ocsp_cert ivar id'>@ocsp_cert</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='then then kw'>then</span> <span class='@ca_cert ivar id'>@ca_cert</span> <span class='else else kw'>else</span> <span class='@ocsp_cert ivar id'>@ocsp_cert</span> <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="profile-instance_method">
  
    - (<tt><span class='object_link'><a href="CaProfile.html" title="R509::Config::CaProfile (class)">R509::Config::CaProfile</a></span></tt>) <strong>profile</strong>(prof) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The config profile.</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>prof</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="CaProfile.html" title="R509::Config::CaProfile (class)">R509::Config::CaProfile</a></span></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'>
<p>The config profile.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


210
211
212
213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 210</span>

<span class='def def kw'>def</span> <span class='profile identifier id'>profile</span><span class='lparen token'>(</span><span class='prof identifier id'>prof</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='@profiles ivar id'>@profiles</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='prof identifier id'>prof</span><span class='rparen token'>)</span>
        <span class='raise identifier id'>raise</span> <span class='R509 constant id'>R509</span><span class='colon2 op'>::</span><span class='R509Error constant id'>R509Error</span><span class='comma token'>,</span> <span class='dstring node'>&quot;unknown profile '#{prof}'&quot;</span>
    <span class='end end kw'>end</span>
    <span class='@profiles ivar id'>@profiles</span><span class='lbrack token'>[</span><span class='prof identifier id'>prof</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_profile-instance_method">
  
    - (<tt>Object</tt>) <strong>set_profile</strong>(name, prof) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>name</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the profile</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="CaProfile.html" title="R509::Config::CaProfile (class)">R509::Config::CaProfile</a></span></tt>)</span>
      
      
        <span class='name'>prof</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The profile configuration</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/r509/Config.rb', line 201</span>

<span class='def def kw'>def</span> <span class='set_profile identifier id'>set_profile</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='prof identifier id'>prof</span><span class='rparen token'>)</span>
    <span class='unless unless kw'>unless</span> <span class='prof identifier id'>prof</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='R509 constant id'>R509</span><span class='colon2 op'>::</span><span class='Config constant id'>Config</span><span class='colon2 op'>::</span><span class='CaProfile constant id'>CaProfile</span><span class='rparen token'>)</span>
        <span class='raise identifier id'>raise</span> <span class='TypeError constant id'>TypeError</span><span class='comma token'>,</span> <span class='string val'>&quot;profile is supposed to be a R509::Config::CaProfile&quot;</span>
    <span class='end end kw'>end</span>
    <span class='@profiles ivar id'>@profiles</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='prof identifier id'>prof</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Tue Dec 27 14:58:04 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.4 (ruby-1.8.7).
</div>

  </body>
</html>