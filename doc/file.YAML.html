<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: YAML
  
    &mdash; Documentation by YARD 0.8.6.1
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: YAML</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>YAML Config Options</h1>

<p>r509 configs are nested hashes that define the behavior of each CA. See r509.yaml for a full example config. These options can also be defined programmatically via R509::Config::CAConfig and R509::Config::CertProfile.</p>

<h2>ca_name</h2>

<h3>ca_cert</h3>

<p>This hash defines the certificate + key that will be used to sign for the ca_name. Depending on desired configuration various elements are optional. You can even supply just <strong>cert</strong> (for example, if you are using an ocsp_cert hash and only using the configured CA for OCSP responses)</p>

<ul>
<li>cert (cannot use with pkcs12)</li>
<li>key (optional, cannot use with pkcs12)</li>
<li>engine (optional, cannot be used with key or pkcs12. Must be a hash with :so_path and :id keys)</li>
<li>key_name (required when using engine)</li>
<li>pkcs12 (optional, cannot be used with key or cert)</li>
<li>password (optional, used for pkcs12 or passworded private key)</li>
</ul>

<h3>ocsp_cert</h3>

<p>This hash defines the certificate + key that will be used to sign for OCSP responses. OCSP responses cannot be directly created with r509, but require the ancillary gem <a href="https://github.com/reaperhulk/r509-ocsp-responder">r509-ocsp-responder</a>. This hash is optional and if not provided r509 will automatically use the ca_cert as the OCSP certificate.</p>

<ul>
<li>cert (cannot use with pkcs12)</li>
<li>key (optional, cannot use with pkcs12)</li>
<li>engine (optional, cannot be used with key or pkcs12. Must be a hash with SO_PATH and ID keys)</li>
<li>key_name (required when using engine)</li>
<li>pkcs12 (optional, cannot be used with key or cert)</li>
<li>password (optional, used for pkcs12 or passworded private key)</li>
</ul>

<h3>crl_cert</h3>

<p>This hash defines the certificate + key that will be used to sign CRLs. This hash is optional and if not provided r509 will automatically use the ca_cert as the CRL delegate certificate.</p>

<ul>
<li>cert (cannot use with pkcs12)</li>
<li>key (optional, cannot use with pkcs12)</li>
<li>engine (optional, cannot be used with key or pkcs12. Must be a hash with SO_PATH and ID keys)</li>
<li>key_name (required when using engine)</li>
<li>pkcs12 (optional, cannot be used with key or cert)</li>
<li>password (optional, used for pkcs12 or passworded private key)</li>
</ul>

<h3>crl_list_file</h3>

<p>The path on the filesystem of the list of revoked certificates for this CA.</p>

<p>Example: &#39;/path/to/my_ca_crl_list.txt&#39;</p>

<h3>crl_number_file</h3>

<p>The path on the filesystem of the current CRL number for this CA.</p>

<p>Example: &#39;/path/to/my_ca_crl_number.txt&#39;</p>

<h3>crl_validity_hours</h3>

<p>Integer hours for CRL validity.</p>

<h3>ocsp_chain</h3>

<p>An optional path to a concatenated text file of PEMs that should be attached to OCSP responses</p>

<h3>ocsp_validity_hours</h3>

<p>Integer hours for OCSP response validity.</p>

<h3>ocsp_start_skew_seconds</h3>

<p>Integer seconds to skew back the &quot;thisUpdate&quot; field. This prevents issues where the OCSP responder signs a response and the client rejects it because the response is &quot;not yet valid&quot; due to slight clock synchronization problems.</p>

<h3>message_digest</h3>

<p>String value of the message digest to use for signing (both CRL and certificates). Allowed values are:</p>

<ul>
<li>SHA1 (default)</li>
<li>SHA224</li>
<li>SHA256</li>
<li>SHA384</li>
<li>SHA512</li>
<li>MD5 (Don&#39;t use this unless you have a really, really good reason. Even then, you shouldn&#39;t)</li>
</ul>

<h3>profiles</h3>

<p>Each CA can have an arbitrary number of issuance profiles (with arbitrary names). For example, a CA named <strong>test_ca</strong> might have 3 issuance profiles: server, email, clientserver. Each of these profiles then has a set of options that define the encoded extensions in the certificate for that profile. If no profiles are defined the root cannot issue certs, but can still issue CRLs.</p>

<p>Profiles are defined by an object (R509::Config::CertProfile) and can be serialized to YAML after being built via <code>#to_yaml</code>. This is the suggested way to generate the profile YAML.</p>

<h3>Example YAML</h3>

<p>This example YAML would be loaded via <code>R509::Config::CAConfigPool.from_yaml</code>. It has a CA named test_ca and a profile named server.</p>

<pre class="code yaml"><code class="yaml">certificate_authorities:
  test_ca:
    ca_cert:
      cert: /path/to/test_ca.cer
      key: /path/to/test_ca.key
    crl_list_file: crl_list_file.txt
    crl_number_file: crl_number_file.txt
    crl_validity_hours: 168
    profiles:
      server:
        basic_constraints:
          :ca: false
        key_usage:
          :critical: false
          :value:
          - digitalSignature
          - keyEncipherment
        extended_key_usage:
          :value:
          - serverAuth
        certificate_policies:
          :value:
          - :policy_identifier: 2.16.840.1.99999.21.234
            :cps_uris:
            - http://example.com/cps
            - http://haha.com
            :user_notices:
            - :explicit_text: this is a great thing
              :organization: my org
              :notice_numbers:
              - 1
              - 2
              - 3
          - :policy_identifier: 2.16.840.1.99999.21.235
            :cps_uris:
            - http://example.com/cps2
            :user_notices:
            - :explicit_text: this is a bad thing
              :organization: another org
              :notice_numbers:
              - 3
              - 2
              - 1
            - :explicit_text: another user notice
        subject_item_policy:
            CN:
              :policy: required
            O:
              :policy: required
            OU:
              :policy: match
              :value: Engineering
            ST:
              :policy: required
            C:
              :policy: required
            L:
              :policy: optional
        crl_distribution_points:
          :value:
          - :type: URI
            :value: http://crl.domain.com/test_ca.crl
        authority_info_access:
          :ocsp_location:
          - :type: URI
            :value: http://ocsp.domain.com
          :ca_issuers_location:
          - :type: URI
            :value: http://www.domain.com/my_roots.html
        default_md: SHA1
        allowed_mds:
        - SHA256
        - SHA1
</code></pre>
</div></div>

    <div id="footer">
  Generated on Sat Jan 25 19:00:16 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.6.1 (ruby-2.0.0).
</div>

  </body>
</html>